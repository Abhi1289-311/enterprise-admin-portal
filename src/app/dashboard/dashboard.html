<div class="dashboard-container">
  <div class="stats-grid">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Total Users</h5>
        <p class="card-text" *ngIf="users$ | async as users">{{ users.length }}</p>
        <small class="card-subtitle">Active users in system</small>
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Active Users</h5>
        <p class="card-text" *ngIf="users$ | async as users">{{ getActiveUsers(users) }}</p>
        <small class="card-subtitle">Currently online</small>
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Total Bookings</h5>
        <p class="card-text" *ngIf="bookings$ | async as bookings">{{ bookings.length }}</p>
        <small class="card-subtitle">All time bookings</small>
      </div>
    </div>
    <div class="card">
      <div class="card-body">
        <h5 class="card-title">Confirmed Bookings</h5>
        <p class="card-text" *ngIf="bookings$ | async as bookings">{{ getConfirmedBookings(bookings) }}</p>
        <small class="card-subtitle">Confirmed transactions</small>
      </div>
    </div>
  </div>

  <div class="recent-bookings">
    <h3>Recent Bookings</h3>
    <table class="table" *ngIf="bookings$ | async as bookings">
      <thead>
        <tr>
          <th>Booking Code</th>
          <th>Customer Name</th>
          <th>Status</th>
          <th>Travel Date</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let booking of getRecentBookings(bookings)">
          <td><strong>{{ booking.bookingCode }}</strong></td>
          <td>{{ booking.customerName }}</td>
          <td>
            <span class="stat-badge" [ngClass]="'badge-' + booking.bookingStatus.toLowerCase()">
              {{ booking.bookingStatus }}
            </span>
          </td>
          <td>{{ booking.travelDate | date: 'short' }}</td>
        </tr>
      </tbody>
    </table>
    <div class="no-data" *ngIf="(bookings$ | async)?.length === 0">
      No recent bookings found
    </div>
  </div>
</div>
